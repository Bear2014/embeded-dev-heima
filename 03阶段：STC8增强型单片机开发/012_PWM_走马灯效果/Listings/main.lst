C51 COMPILER V9.60.7.0   MAIN                                                              04/07/2025 22:00:57 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "STC8h.h"
   2          #include "lib/Config.h"
   3          #include "lib/STC8G_H_GPIO.h"
   4          #include "lib/STC8G_H_Delay.h"
   5          #include "lib/STC8G_H_NVIC.h"
   6          #include "lib/STC8G_H_Switch.h"
   7          #include "lib/STC8H_PWM.h"
   8          
   9          void Delay1000ms();
  10          
  11          #define LED_SW P45
  12          #define LED1 P27
  13          #define LED2 P26
  14          #define LED3 P15
  15          #define LED4 P14
  16          #define LED5 P23
  17          #define LED6 P22
  18          #define LED7 P21
  19          #define LED8 P20
  20          
  21          
  22          void GPIO_Config() {
  23   1        GPIO_InitTypeDef GPIO_InitTypeDef;
  24   1      
  25   1        GPIO_InitTypeDef.Mode = GPIO_OUT_PP;
  26   1        GPIO_InitTypeDef.Pin = GPIO_Pin_5;
  27   1        GPIO_Inilize(GPIO_P4,&GPIO_InitTypeDef);
  28   1        
  29   1        
  30   1        GPIO_InitTypeDef.Mode = GPIO_OUT_PP;
  31   1        GPIO_InitTypeDef.Pin = GPIO_Pin_7 | GPIO_Pin_6;
  32   1        GPIO_Inilize(GPIO_P2,&GPIO_InitTypeDef);
  33   1        
  34   1        
  35   1        GPIO_InitTypeDef.Mode = GPIO_OUT_PP;
  36   1        GPIO_InitTypeDef.Pin = GPIO_Pin_4 | GPIO_Pin_5;
  37   1        GPIO_Inilize(GPIO_P1,&GPIO_InitTypeDef);
  38   1        
  39   1        
  40   1        GPIO_InitTypeDef.Mode = GPIO_OUT_PP;
  41   1        GPIO_InitTypeDef.Pin = GPIO_Pin_3 | GPIO_Pin_2 | GPIO_Pin_1 | GPIO_Pin_0;
  42   1        GPIO_Inilize(GPIO_P2,&GPIO_InitTypeDef);
  43   1      }
  44          
  45          
  46          
  47          void main() {
  48   1        
  49   1        long i,j;
  50   1        
  51   1        EA = 1;
  52   1        
  53   1        //≈‰÷√GPIO
  54   1        GPIO_Config();
C51 COMPILER V9.60.7.0   MAIN                                                              04/07/2025 22:00:57 PAGE 2   

  55   1        
  56   1        LED_SW = 0;
  57   1      
  58   1        
  59   1        while(1) {
  60   2          
  61   2      //    LED1 = LED2 = LED3 = LED4 = LED5 = LED6 = LED7 = LED8 = 0;
  62   2      //  
  63   2      //    delay_ms(250);
  64   2      //    delay_ms(250);
  65   2          
  66   2      //    Delay1000ms();
  67   2      //    Delay1000ms();
  68   2      //    Delay1000ms();
  69   2      //    Delay1000ms();
  70   2          
  71   2      //    LED1 = LED2 = LED3 = LED4 = LED5 = LED6 = LED7 = LED8 = 1;
  72   2          
  73   2          for(i=1;i<9;i++) {
  74   3            LED1 = i == 1 ? 0 : 1;
  75   3            LED2 = i == 2 ? 0 : 1;
  76   3            LED3 = i == 3 ? 0 : 1;
  77   3            LED4 = i == 4 ? 0 : 1;
  78   3            LED5 = i == 5 ? 0 : 1;
  79   3            LED6 = i == 6 ? 0 : 1;
  80   3            LED7 = i == 7 ? 0 : 1;
  81   3            LED8 = i == 8 ? 0 : 1;
  82   3            delay_ms(250);
  83   3          }
  84   2          
  85   2          
  86   2          for(j=8;i>0;j--) {
  87   3            LED1 = j == 1 ? 0 : 1;
  88   3            LED2 = j == 2 ? 0 : 1;
  89   3            LED3 = j == 3 ? 0 : 1;
  90   3            LED4 = j == 4 ? 0 : 1;
  91   3            LED5 = j == 5 ? 0 : 1;
  92   3            LED6 = j == 6 ? 0 : 1;
  93   3            LED7 = j == 7 ? 0 : 1;
  94   3            LED8 = j == 8 ? 0 : 1;
  95   3            delay_ms(250);
  96   3          }
  97   2          
  98   2        }
  99   1        
 100   1      }
 101          
 102          
 103          void Delay1000ms(void)  //@24.000MHz
 104          {
 105   1        unsigned char data i, j, k;
 106   1      
 107   1        i = 122;
 108   1        j = 193;
 109   1        k = 128;
 110   1        do
 111   1        {
 112   2          do
 113   2          {
 114   3            while (--k);
 115   3          } while (--j);
 116   2        } while (--i);
C51 COMPILER V9.60.7.0   MAIN                                                              04/07/2025 22:00:57 PAGE 3   

 117   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    627    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
